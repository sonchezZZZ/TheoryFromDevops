Link = https://rtfm.co.ua/istio-obzor-i-zapusk-service-mesh-v-kubernetes/


# Service mesh

Ключевыми задачами, которые берет на себя service mesh, являются:

- управление трафиком
- балансировка нагрузки
- обеспечение безопасности при взаимодействии сервисов
- сбор метрик и мониторинг

![image](https://user-images.githubusercontent.com/79608549/154493607-b0aeb27d-9131-4cff-8df3-f811bc3db642.png)


# Архитектура Istio

Итак, Istio как service mesh состоит из двух основных частей – Data plane и Control plane:

- **Data plane (“уровень данных”)**: состоит из набора прокси-сервисов, sidecar-контейнеров в каждом поде, для которых использует расширенную версию прокси-сервера Envoy. Эти сайдакры связывают и контролируют трафик между приложениями, собирают и отправляют метрики
- **Control plane (“уровень управления”)**: управляет и настраивает сайдкары, управляет метриками, TLS-сертификатами

![image](https://user-images.githubusercontent.com/79608549/154493868-159554a5-36b3-4ed0-bee6-40aafa8df07e.png)


# Control Plane

Istio включает в себя четыре основных компонента:

- **Pilot**: центральный контроллер, отвечающий за коммуникацию с сайдкарами используя Envoy API. Он считывает правила, описанные в манифестах istio, и отправляет их в Envoy для настройки прокси-сервисов. Отвечает за service discovery, управление трафиком, роутинг, устойчивостью сети с помощью таймаутов и circuit breaking.
- **Citadel**: Identity and Access management – шифрование трафика, аутентификация сервисов и пользователей, управление ключами шифрования. См. Istio Security.
- **Galley**: управление конфигурацией – валдиация, обработка новых настроек, отправка их остальным компонентам системы
- **Mixer**: мониторинг, метрики, логи, контроль трафика

В версии 1.9.1 все они, кроме Pilot, который работает в отдельном Docker-контейнере, объединены в отдельный бинарный файл istiod, плюс Ingress и Egress Controllers – контроллеры входящего и исходящего трафика
